var isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);function getUrlParams(){var params={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(m,key,value){params[key]=value})),params}function tblSortDir(){this.asc=1,this.lastSortedColNum=-1}function tableSortDirectionHelper(a,b,sortPriority,i,dir){return a[sortPriority[i]]==b[sortPriority[i]]?i==sortPriority.length-1?0:tableSortDirectionHelper(a,b,sortPriority,++i,dir):a[sortPriority[i]]>b[sortPriority[i]]?dir.asc:-1*dir.asc}function numberWithCommas(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function formatPhoneNum(phoneNum){var cleaned,match=phoneNum.toString().replace(/\D/g,"").match(/^(\d{3})(\d{3})(\d{4})$/);return match?"("+match[1]+") "+match[2]+"-"+match[3]:phoneNum}function sync_col_width(tableBodyId,tableHeaderId){var headerArray=document.getElementById(tableHeaderId).rows[0],bodyArray=document.getElementById(tableBodyId).rows[0];if(null!=headerArray||null!=bodyArray)for(var i=0;i<headerArray.cells.length;i++)headerArray.cells[i].style.width=bodyArray.cells[i].offsetWidth+"px"}!function($){$.fn.formatMobileMenu=function(){var logo='<div id="mobile-site-logo"><a href="/Home.php"><img src="/includes/images/nsi_logo.png"></a></div>';$(".slicknav_menu").prepend(logo)},$.fn.lockScrollBar=function(){var scrollPos_x=$(document).scrollLeft(),scrollPos_y=$(document).scrollTop();$(this).css({top:-scrollPos_y+"px",left:-scrollPos_x+"px"}).addClass("scroll-lock"),$("#site-header-banner").addClass("scroll-locked-site-header-banner").css({top:scrollPos_y+"px"})},$.fn.unlockScrollBar=function(){var scrollPos=$("body").position();$(this).removeClass("scroll-lock"),$(document).scrollTop(-scrollPos.top),$(document).scrollLeft(-scrollPos.left),$("#site-header-banner").removeClass("scroll-locked-site-header-banner").css({top:""})},$.fn.openModal=function(){$(this).click((function(evt){evt.preventDefault(),$("head").append('<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js"><\/script>'),$(".modal").show(),$("body").lockScrollBar(),sync_col_width("table-list","table-list-header")}))},$.fn.closeModal=function(){$(this).click((function(){$(".modal").hide(),$("body").unlockScrollBar()}))},$.fn.collapseObj=function(evt,activeClassName){$(this).on(evt,(function(){var content=null!=$(this).children(".dropdown-content")[0]?$(this).children(".dropdown-content"):$(this).next();$(this).toggleClass(activeClassName),content.height()?content.height(0):content.height(content.prop("scrollHeight"))}))},$.fn.homeRegOneContentBoxHandler=function(){for(var hospitalList=$(".hospital-content-list ul li"),nurseList=$(".nurse-content-list ul li"),hospitalListHalfPoint=Math.floor(hospitalList.length/2),nurseListHalfPoint=Math.floor(nurseList.length/2),i=0;i<hospitalListHalfPoint;i++){var j=hospitalListHalfPoint+i;hospitalList.eq(i).height()>hospitalList.eq(j).height()?hospitalList.eq(j).height(hospitalList.eq(i).height()):hospitalList.eq(i).height(hospitalList.eq(j).height())}for(var i=0;i<nurseListHalfPoint;i++){var j=nurseListHalfPoint+i;nurseList.eq(i).height()>nurseList.eq(j).height()?nurseList.eq(j).height(nurseList.eq(i).height()):nurseList.eq(i).height(nurseList.eq(j).height())}isMobile||($(".hospital-content-list-img").css({height:$(".hospital-content-list").outerHeight()}),$(".nurse-content-list-img").css({height:$(".nurse-content-list").outerHeight()})),$(window).resize((function(){$(".content-list ul li").css({height:""});for(var i=0;i<hospitalListHalfPoint;i++){var j=hospitalListHalfPoint+i;hospitalList.eq(i).height()>hospitalList.eq(j).height()?hospitalList.eq(j).height(hospitalList.eq(i).height()):hospitalList.eq(i).height(hospitalList.eq(j).height())}for(var i=0;i<nurseListHalfPoint;i++){var j=nurseListHalfPoint+i;nurseList.eq(i).height()>nurseList.eq(j).height()?nurseList.eq(j).height(nurseList.eq(i).height()):nurseList.eq(i).height(nurseList.eq(j).height())}isMobile||($(".hospital-content-list-img").css({height:$(".hospital-content-list").outerHeight()}),$(".nurse-content-list-img").css({height:$(".nurse-content-list").outerHeight()}))}))},$.fn.listHandler=function(csv_path,bodyTableId,headerTableId,shareButtonsOn){$.ajax({type:"GET",url:csv_path,dataType:"text",success:function(data,unused,req){var csv_data=$.csv.toArrays(data),tableBody="",stateColNum=-1,incentiveColNum=-1,unitColNum=-1,lastMod=new Date(req.getResponseHeader("Last-Modified"));lastMod=lastMod.getMonth()+1+"/"+lastMod.getDate()+"/"+lastMod.getFullYear(),$(".last-updated").html("Last Updated: "+lastMod);for(var row=0;row<csv_data.length;row++){for(var tableRow="<tr>",cellData=csv_data[row],cellTypeOpen=0==row?"<th":"<td",cellTypeClose=0==row?'<div class="sort-arrow-container"><div class="sort-arrow"></div></div></th>':"</td>",shareLocation=window.location.href,shareDescription,shareTitle="NSI Nursing Opportunity"+(-1!=stateColNum?" in "+cellData[stateColNum]+" - "+cellData[incentiveColNum]+"Sign-on Bonus, "+cellData[unitColNum]+" Position":""),col=0;col<cellData.length;col++){var colNumLabel=">";0==row&&("state"==cellData[col].toLowerCase()&&(stateColNum=col),"incentive"==cellData[col].toLowerCase()&&(incentiveColNum=col),"unit"==cellData[col].toLowerCase()&&(unitColNum=col),colNumLabel=' class="'+cellData[col].toLowerCase()+'" data-col-num="'+col+'">'),tableRow+=cellTypeOpen+colNumLabel+cellData[col]+cellTypeClose}shareButtonsOn&&(0==row?tableRow+='<th class="share-header">Share</th>':(tableRow+='<td><div class="addthis_toolbox addthis_default_style addthis_32x32_style" addthis:url="'+shareLocation+'" addthis:title="'+shareTitle+'">',tableRow+='<a class="addthis_button_facebook hidden-xs hidden-sm"></a>',tableRow+='<a class="addthis_button_twitter hidden-xs hidden-sm"></a>',tableRow+='<a class="addthis_button_compact"></a>',tableRow+="</div></td>")),tableRow+="</tr>",0==row?($("#"+bodyTableId+" thead").append(tableRow),$("#"+headerTableId+" thead").append(tableRow)):tableBody+=tableRow,sync_col_width(bodyTableId,headerTableId)}$("#"+bodyTableId+" tbody").append(tableBody),setTimeout((function(){$("head").append('<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js"><\/script>')}),250)}}),$(window).resize((function(){sync_col_width(bodyTableId,headerTableId)}))},$.fn.tableSort=function(target_table_body_id,dir){setTimeout((function(){var stateCol=$("th.state").attr("data-col-num");$("#table-list-header th:eq("+stateCol+")").click()}),350),$(this).on("click","th",(function(){for(var table=document.getElementById(target_table_body_id),sortCol=$(this).attr("data-col-num"),stateCol,cityCol,locationCol,titleCol,tmpArry=[sortCol,$("th.state").attr("data-col-num"),$("th.city").attr("data-col-num"),$("th.location").attr("data-col-num"),$("th.title").attr("data-col-num")],sortPriority=new Array,arr=new Array,rows=table.rows,cells,validCols=0,i=0;i<tmpArry.length;i++)null==tmpArry[i]||i>0&&tmpArry[i]==sortCol||(sortPriority[validCols]=tmpArry[i],validCols++);sortCol==dir.lastSortedColNum?(dir.asc=-1*dir.asc,dir.asc<0?($(this).find(".sort-arrow").removeClass("sort-asc").addClass("sort-desc"),$("#table-list th:eq("+sortCol+")").find(".sort-arrow").removeClass("sort-asc").addClass("sort-desc")):($(this).find(".sort-arrow").removeClass("sort-desc").addClass("sort-asc"),$("#table-list th:eq("+sortCol+")").find(".sort-arrow").removeClass("sort-desc").addClass("sort-asc"))):(dir.lastSortedColNum=sortCol,dir.asc=1,$("thead th .sort-arrow").removeClass("sort-asc sort-desc"),$(this).find(".sort-arrow").addClass("sort-asc"),$("#table-list th:eq("+sortCol+")").find(".sort-arrow").addClass("sort-asc")),sync_col_width("table-list-body","table-list-header");for(var i=0;i<rows.length;i++){cells=rows[i].cells,arr[i]=new Array;for(var j=0;j<cells.length;j++)arr[i][j]=cells[j].innerHTML}arr.sort((function(a,b){return tableSortDirectionHelper(a,b,sortPriority,0,dir)}));for(var i=0;i<rows.length;i++)arr[i]="<td>"+arr[i].join("</td><td>")+"</td>";table.innerHTML="<tr>"+arr.join("</tr><tr>")+"</tr>"}))},$.fn.stateMapHandler=function(){for(var classNames=".current-client, .pending-client",path="/Documents/job_openings.csv",targetTable=".current-job-list",stateClass="current-client",status="current",i=0;i<2;i++)1==i&&(path="/Documents/job_openings_coming_soon.csv",targetTable=".pending-job-list",stateClass="pending-client",status="pending"),$.ajax({type:"GET",url:path,async:!1,dataType:"text",success:function(data){for(var csv_data=$.csv.toArrays(data),tableBody="",stateColNum=-1,prevState="",row=0;row<csv_data.length;row++){for(var tableRow="<tr>",cellData=csv_data[row],cellTypeOpen=0==row?"<th":"<td",cellTypeClose=0==row?'<div class="sort-arrow"></div></th>':"</td>",col=0;col<cellData.length;col++){var colNumLabel=">";0==row&&("state"==cellData[col].toLowerCase()&&(stateColNum=col),colNumLabel=' class="'+cellData[col].toLowerCase()+'" data-col-num="'+col+'">'),tableRow+=cellTypeOpen+colNumLabel+cellData[col]+cellTypeClose}if(1==i&&(tableRow+=0==row?"<th>Status</th>":"<td><strong>Coming Soon</strong></td>"),tableRow+="</tr>",-1==stateColNum)return void alert("ERROR: Unable to find state openings.");0==row?($(targetTable+" #"+status+"-state-job-list-header thead").append(tableRow),$(targetTable+" #"+status+"-state-job-list-body thead").append(tableRow)):(1==row?tableBody='<tbody class="'+cellData[stateColNum]+'">':prevState!=cellData[stateColNum]&&(tableBody+='</tbody><tbody class="'+cellData[stateColNum]+'">'),tableBody+=tableRow),$("#job-map #"+cellData[stateColNum]).addClass(stateClass),prevState=cellData[stateColNum]}$(targetTable+" #"+status+"-state-job-list-body").append(tableBody)}});var boxPos={x:-1,y:-1};$(this).on("mousemove",classNames,(function(event){var xOffset=11+$("#state-name-box").width()/2,yOffset=185;boxPos.x=event.pageX-xOffset,boxPos.y=event.pageY-185,$(".state-box").css({left:boxPos.x+"px",top:boxPos.y+"px"})})),$(this).on("click",classNames,(function(){$("body").lockScrollBar(),$(".state-job-list ."+$(this).attr("id")).addClass("state-job-list-active"),$(this).hasClass("current-client")?$(".current-job-list").show():$(".current-job-list").hide(),$(this).hasClass("pending-client")?$(".pending-job-list").show():$(".pending-job-list").hide();var maxHeight=250,elClone=$(".state-job-list").clone().css({width:"auto",height:"auto"}).appendTo(".state-box"),autoHeight=elClone.outerHeight(),autoWidth=elClone.outerWidth();elClone.remove(),$(".state-job-list").width(autoWidth),autoHeight<250?$(".state-job-list").height(autoHeight):$(".state-job-list").height(250),boxPos.x+autoWidth>$("#page").width()&&(boxPos.x-=boxPos.x+autoWidth-$("#page").width(),$(".state-box").css({left:boxPos.x+"px"})),setTimeout((function(){sync_col_width("current-state-job-list-body","current-state-job-list-header"),sync_col_width("pending-state-job-list-body","pending-state-job-list-header")}),200),$(".state-box").on("mouseleave",(function(){$("body").unlockScrollBar(),$(".state-job-list").width(0),$(".state-job-list").height(0),$(".state-job-list").scrollTop(0),$(".state-job-list tbody").removeClass("state-job-list-active"),$(".state-box").removeClass("state-box-active"),$(".current-job-list #state-job-list-header").css({bottom:""}),$(".pending-job-list #state-job-list-header").css({top:""}),currentListContainer.removeClass("not-currently-scrolling-list"),pendingListContainer.addClass("not-currently-scrolling-list")}))})),$(".state-job-list").on("scroll",(function(){var stateNameBoxHeight=$("#state-name-box").prop("scrollHeight"),currentListHeader=$(".current-job-list #current-state-job-list-header"),currentListContainer=$(".current-job-list"),currentListHeight=currentListContainer.prop("scrollHeight")-currentListHeader.height(),pendingListHeader=$(".pending-job-list #pending-state-job-list-header"),pendingListContainer=$(".pending-job-list"),pendingListStart=$(".current-job-list").prop("scrollHeight");$(this).scrollTop()>currentListHeight&&$(this).scrollTop()<pendingListStart?(currentListHeader.css({bottom:0}),pendingListHeader.css({top:0}),currentListContainer.addClass("not-currently-scrolling-list"),pendingListContainer.addClass("not-currently-scrolling-list")):$(this).scrollTop()>currentListHeight?(currentListHeader.css({bottom:0}),pendingListHeader.css({top:stateNameBoxHeight}),currentListContainer.addClass("not-currently-scrolling-list"),pendingListContainer.removeClass("not-currently-scrolling-list")):(currentListHeader.css({bottom:""}),pendingListHeader.css({top:0}),currentListContainer.removeClass("not-currently-scrolling-list"),pendingListContainer.addClass("not-currently-scrolling-list"))})),$(this).on("mouseenter",classNames,(function(){$("#state-name-box").html($(this).html()),$(".state-box").addClass("state-box-active")})),$(this).on("mouseleave",classNames,(function(){$(".state-job-list ."+$(this).attr("id")).is(":visible")||$(".state-box").removeClass("state-box-active")})),setTimeout((function(){if(isMobile)$(".job-map-side-info").children("div").removeClass("vertically-center"),$(".job-map-side-info").css({height:""});else{$(".job-map-side-info").children("div").removeClass("vertically-center"),$(".job-map-side-info").css({height:""});var mapHeight=$(".job-map-container").outerHeight(),containerHeight=$(".job-map-region-container").outerHeight(),infoBoxImgHeight,infoBoxTextHeight=containerHeight-$(".job-map-side-img").outerHeight();containerHeight<=mapHeight&&($(".job-map-side-info").children("div").addClass("vertically-center"),$(".job-map-side-info").css({height:infoBoxTextHeight+"px"}))}}),250),$(window).resize((function(){if(isMobile)$(".job-map-side-info").children("div").removeClass("vertically-center"),$(".job-map-side-info").css({height:""});else{$(".job-map-side-info").children("div").removeClass("vertically-center"),$(".job-map-side-info").css({height:""});var mapHeight=$(".job-map-container").outerHeight(),containerHeight=$(".job-map-region-container").outerHeight(),infoBoxImgHeight,infoBoxTextHeight=containerHeight-$(".job-map-side-img").outerHeight();containerHeight<=mapHeight&&($(".job-map-side-info").children("div").addClass("vertically-center"),$(".job-map-side-info").css({height:infoBoxTextHeight+"px"}))}}))},$.fn.libNewsHandler=function(){$.ajax({type:"GET",url:"/Documents/Library/NSI_In_The_News.csv",dataType:"text",success:function(data){for(var csv_data=$.csv.toObjects(data),tableBody="",tableListBody="table-list",tableListHeader="table-list-header",row=csv_data.length-1;row>-1;row--){var tableRow="<tr>",cellData=csv_data[row];0==row?(tableRow+='<th class="title" data-col-num="0">Title</th>',tableRow+='<th class="date" data-col-num="1">Date Published</th>'):(tableRow+='<td><a target="_blank" href="'+cellData.URL+'">'+cellData.Title+"</a></td>",tableRow+="<td>"+cellData.Date+"</td>"),tableRow+="</tr>",0==row?($("#table-list thead").append(tableRow),$("#table-list-header thead").append(tableRow)):tableBody+=tableRow,sync_col_width("table-list",tableListHeader)}$("#table-list tbody").append(tableBody)}}),$(window).resize((function(){sync_col_width("table-list","table-list-header")}))},$.fn.quoteHandler=function(){$.ajax({type:"GET",url:"/Documents/Testimonials_RN.csv",dataType:"text",success:function(data){for(var csv_data=$.csv.toObjects(data),height=$("#region-two #content-body").height(),numQuotes=12,quoteSectionHeight=$(".app-content-box").outerHeight()/6,i=0;i<12;i++){var side="",upperHeightBound=quoteSectionHeight*Math.floor(i/2),width=$(side=i%2?".bkgrd-quotes-right":".bkgrd-quotes-left").width(),widthOffset=320,randOffset=50,tailDir=Math.floor(2*Math.random())?"right":"left",quoteIndex=Math.floor(Math.random()*csv_data.length),locX=Math.floor(Math.random()*width),locY=Math.floor(Math.random()*quoteSectionHeight+upperHeightBound),quote='<div class="quote-container" data-quote-num="'+i+'">';quote+='<div class="quote-box">',quote+='<p class="quote">'+csv_data[quoteIndex].Quote+"</p>",quote+='<p class="quotee">- '+csv_data[quoteIndex].Name+", "+csv_data[quoteIndex].State+"</p>",quote+='</div><div class="quote-tail-'+tailDir+'"></div></div>',$(side).append(quote);var el=$("#content-bkgrd-quotes [data-quote-num="+i+"]");".bkgrd-quotes-right"==side?locX<320?locX=320+50*Math.random():width<locX+el.width()&&(locX=width-el.width()-50*Math.random()):locX+el.width()>width-320&&(locX=width-320-el.width()-50*Math.random()),height<locY+el.height()&&(locY=height-el.height()-50*Math.random()),el.css({left:locX,top:locY}),csv_data.splice(quoteIndex,1)}}})},$.fn.loadPresentation=function(){var url="/Documents/SalesPresentation.pdf",pdfjsLib=window["pdfjs-dist/build/pdf"];pdfjsLib.GlobalWorkerOptions.workerSrc="https://mozilla.github.io/pdf.js/build/pdf.worker.js";var defaultContainerWidth=935,defaultContainerHeight=725,pdfDoc=null,pageNum=1,pageRendering=!1,pageNumPending=null,scale=2,canvas=document.getElementById("pwr-pt-pres"),ctx=canvas.getContext("2d");function renderPage(num){pageRendering=!0,pdfDoc.getPage(num).then((function(page){var viewport=page.getViewport({scale:scale});canvas.height=viewport.height,canvas.width=viewport.width;var renderContext={canvasContext:ctx,viewport:viewport},renderTask;page.render(renderContext).promise.then((function(){pageRendering=!1,null!==pageNumPending&&(renderPage(pageNumPending),pageNumPending=null)}))})),document.getElementById("page_num").textContent=num}function queueRenderPage(num){pageRendering?pageNumPending=num:renderPage(num)}canvas.style.width="100%",canvas.style.height="100%",$(".prev-slide").click((function(){pageNum<=1||queueRenderPage(--pageNum)})),$(".next-slide").click((function(){pageNum>=pdfDoc.numPages||queueRenderPage(++pageNum)})),heightScaler=$(".pwr-pt-container").outerWidth()/935,$(".pwr-pt-container").css({height:725*heightScaler}),$(window).resize((function(){heightScaler=$(".pwr-pt-container").outerWidth()/935,$(".pwr-pt-container").css({height:725*heightScaler})})),pdfjsLib.getDocument(url).promise.then((function(pdfDoc_){pdfDoc=pdfDoc_,document.getElementById("page_count").textContent=pdfDoc.numPages,renderPage(pageNum)}))},$.fn.savingsCalculator=function(){$("#reset-btn").on("click",(function(){$(".form-input").val(""),$('input[name = "COB"]').val("28")})),$(".form-input").on("change, keyup",(function(){var fixedInput=$(this).val().replace(/[A-Za-z -,\/:-~]/g,"");$(this).val(fixedInput);var fullTimeHours=2080,tmp=numberWithCommas($(this).val().replace(",","")),contractLabor=$('input[name = "ContractLaborRate"]').val().replace(",",""),staffNurseRate=$('input[name = "StaffNurseRate"]').val().replace(",",""),cob=$('input[name = "COB"]').val().replace(",","")/100+1,numNurses=$('input[name = "NumberNursesNeeded"]').val().replace(",",""),AdjustedRate=staffNurseRate*cob,firstYrSavings=Math.floor(contractLabor*numNurses*2080-staffNurseRate*cob*numNurses*2080);$('input[name="AdjustedRate"').val(numberWithCommas(AdjustedRate.toFixed(2))),$('input[name="FirstSavings"]').val(numberWithCommas(firstYrSavings)+".00"),$(this).val(tmp)})),$("#contact-us-btn").on("click",(function(){var emailBody="",numNursesNeeded=$('input[name = "NumberNursesNeeded"]').val(),contractRate=$('input[name = "ContractLaborRate"]').val(),staffRate=$('input[name = "StaffNurseRate"]').val(),cobVal=$('input[name = "COB"]').val(),adjustedRate=$('input[name = "AdjustedRate"]').val(),totalSavings=$('input[name = "FirstSavings"]').val();""!=totalSavings&&"0.00"!=totalSavings&&(emailBody="Hi Michael,\n\n",emailBody+="I have entered the information below into the NSI Savings Calculator.  I am interested in learning more about NSI Nursing Solutions and look forward to hearing from you soon.\n\n",emailBody+="Number of RNs Needed:\t"+numNursesNeeded+"\n",emailBody+="RN Contract Labor Rate:\t\t$"+contractRate+"\n",emailBody+="Average Staff RN Rate:\t\t$"+staffRate+"\n",emailBody+="Cost of Benefits:\t\t"+cobVal+"%\n",emailBody+="Adjusted Staff RN Rate:\t\t$"+adjustedRate+"\n",emailBody+="Projected Total Savings:\t\t$"+totalSavings+"\n",emailBody+="\n");var mailToLink="mailto:macolosi@nsinursingsolutions.com?subject=NSI%20Savings%20Calculator&body="+encodeURIComponent(emailBody);window.location.href=mailToLink})),$(".field-info-container").on("mouseenter",(function(){$(this).children(".field-info").addClass("field-info-active")})),$(".field-info-container").on("mouseleave",(function(){$(this).children(".field-info").removeClass("field-info-active")}))}}($);